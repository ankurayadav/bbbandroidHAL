<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>BBBAndroidHAL: jni/can.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BBBAndroidHAL
   &#160;<span id="projectnumber">V1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5e114aeb986e10d33f9bd0abaab0267d.html">jni</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">can.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>CAN general purpose interface code.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;sys/ioctl.h&gt;</code><br/>
<code>#include &lt;sys/socket.h&gt;</code><br/>
<code>#include &lt;net/if.h&gt;</code><br/>
<code>#include &quot;include/linux/can.h&quot;</code><br/>
<code>#include &quot;include/linux/can/raw.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="bbbandroidHAL_8h_source.html">bbbandroidHAL.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aeac0c3db7a1e021f17987bcc76893849"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="can_8c.html#aeac0c3db7a1e021f17987bcc76893849">PF_CAN</a>&#160;&#160;&#160;29</td></tr>
<tr class="separator:aeac0c3db7a1e021f17987bcc76893849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a546620c7e758f003b24b7fdae4f97bd4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="can_8c.html#a546620c7e758f003b24b7fdae4f97bd4">AF_CAN</a>&#160;&#160;&#160;<a class="el" href="can_8c.html#aeac0c3db7a1e021f17987bcc76893849">PF_CAN</a></td></tr>
<tr class="separator:a546620c7e758f003b24b7fdae4f97bd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7064470236c735a8d3e4f64cf104a35c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="can_8c.html#a7064470236c735a8d3e4f64cf104a35c">canOpenSocket</a> (const int socket_type, const int protocol)</td></tr>
<tr class="separator:a7064470236c735a8d3e4f64cf104a35c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55ed8a8af0c0fd6e9b49c41e765d21d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="can_8c.html#a55ed8a8af0c0fd6e9b49c41e765d21d4">canOpenRaw</a> (const char *port)</td></tr>
<tr class="separator:a55ed8a8af0c0fd6e9b49c41e765d21d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a36c8a919732a7922534dafaf5f8915"><td class="memItemLeft" align="right" valign="top">unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="can_8c.html#a8a36c8a919732a7922534dafaf5f8915">canReadBytes</a> (const int fd, int *length)</td></tr>
<tr class="separator:a8a36c8a919732a7922534dafaf5f8915"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4bd9452449a4404d03b375439ea733d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="can_8c.html#ae4bd9452449a4404d03b375439ea733d">canSendBytes</a> (const int canFD, const int no_bytes, const uint8_t data[])</td></tr>
<tr class="separator:ae4bd9452449a4404d03b375439ea733d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33b66fa00bcdc221803fc9435f06cfe6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="can_8c.html#a33b66fa00bcdc221803fc9435f06cfe6">canClose</a> (const int canFD)</td></tr>
<tr class="separator:a33b66fa00bcdc221803fc9435f06cfe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>CAN general purpose interface code. </p>
<dl class="section author"><dt>Author</dt><dd>Ankur Yadav (<a href="#" onclick="location.href='mai'+'lto:'+'ank'+'ur'+'aya'+'da'+'v@g'+'ma'+'il.'+'co'+'m'; return false;">ankur<span style="display: none;">.nosp@m.</span>ayad<span style="display: none;">.nosp@m.</span>av@gm<span style="display: none;">.nosp@m.</span>ail.<span style="display: none;">.nosp@m.</span>com</a>) </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a546620c7e758f003b24b7fdae4f97bd4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AF_CAN&#160;&#160;&#160;<a class="el" href="can_8c.html#aeac0c3db7a1e021f17987bcc76893849">PF_CAN</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>AF_CAN macro defination which was missing from can.h </p>

</div>
</div>
<a class="anchor" id="aeac0c3db7a1e021f17987bcc76893849"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PF_CAN&#160;&#160;&#160;29</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>PF_CAN macro defination which was missing from can.h </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a33b66fa00bcdc221803fc9435f06cfe6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void canClose </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>canFD</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to close CAN file descriptor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">canFD</td><td>a constant integer argument. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a55ed8a8af0c0fd6e9b49c41e765d21d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int canOpenRaw </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function takes port string as input and opens socket using <a class="el" href="can_8c.html#a7064470236c735a8d3e4f64cf104a35c">canOpenSocket()</a>, locates interface using ioctl() system call then binds the socket with CAN interface and returns the file descriptor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>a constant character pointer argument. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="can_8c.html#a7064470236c735a8d3e4f64cf104a35c">canOpenSocket()</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>If successful then CAN file descriptor after opening socket is returned and if it fails then -1 is returned. </dd></dl>

</div>
</div>
<a class="anchor" id="a7064470236c735a8d3e4f64cf104a35c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int canOpenSocket </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>socket_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>protocol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function takes socket_type and protocol as input and opens socket of that type and protocol and then returns file descriptor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket_type</td><td>a constant integer argument. </td></tr>
    <tr><td class="paramname">protocol</td><td>a constant integer argument. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If successful then CAN file descriptor after opening socket is returned and if it fails then -1 is returned. </dd></dl>

</div>
</div>
<a class="anchor" id="a8a36c8a919732a7922534dafaf5f8915"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* canReadBytes </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This functions takes file descriptor and length of data to be read as input and returns the pointer to the array of data bytes read. If no data is read then NULL pointer is returned. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>a constant integer argument. </td></tr>
    <tr><td class="paramname">length</td><td>a integer pointer argument. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The pointer to the array of data bytes read. If no data is read then NULL pointer is returned. </dd></dl>

</div>
</div>
<a class="anchor" id="ae4bd9452449a4404d03b375439ea733d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int canSendBytes </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>canFD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>no_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>data</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function takes can file descriptor, number of bytes and array of data to be transferred as input and writes given number of bytes of data from data buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">canFD</td><td>a constant integer argument. </td></tr>
    <tr><td class="paramname">no_bytes</td><td>a constant unsigned integer argument. </td></tr>
    <tr><td class="paramname">data</td><td>array of constant uint8_t argument. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes successfully written to CAN device. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 27 2015 03:55:36 for BBBAndroidHAL by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
